<section class="sign-container">
    <div class="tiny-container">
        <h2>S'inscrire</h2>

        <% @role = params[:role] %>

        <%= form_for(resource, as: resource_name, url: registration_path(resource_name)) do |f| %>
        <%= devise_error_messages! %>
        <div class="bkg-light-grey p-10">
            <% if @role == "true" || @role == nil%>
            <!-- CHECK IF SENIOR -->
            <div class="">
                <div class="field">
                    <%= f.label :Où_habitez_vous?, :class => "full-width" %>
                    <%= f.select :ville, ['Bordeaux', 'Paris','Quimper']%>
                </div>
                <% if @role == "true" %>
                <%= f.hidden_field :role, value: true %>
                <% elsif @role == "false" %>
                <%= f.hidden_field :role, value: false %>
                <% else %>
                <div class="role-container">
                    <div class="field role">
                        <%= f.label :Je_suis %><br/>
                        <div class="role-buttons">
                          <%= f.collection_radio_buttons :role, [[true, 'Hôte'] ,[false, 'Convive']], :first, :last %>
                        </div>
                    </div>
                </div>
                <% end %>
                <div class="field">
                    <%= f.label :Votre_photo %>
                    <%= f.file_field :image %>
                </div>
                <div class="field">
                    <%= f.text_field :nom, :placeholder => "Nom" %>
                </div>

                <div class="field">
                    <%= f.text_field :prenom, :placeholder => "Prenom" %>
                </div>

                <div class="field">
                    <%= f.email_field :email, autofocus: true, :placeholder => "E-mail" %>
                </div>

                <div class="field">
                    <%= f.text_field :telephone, :placeholder => "Telephone" %>
                </div>

                <div class="field">
                    <%= f.password_field :password, autocomplete: "off", :placeholder => "Mot de passe" %>
                </div>

                <div class="field">
                    <%= f.password_field :password_confirmation, autocomplete: "off", :placeholder => "Confirmez le mot de passe" %>
                </div>
                <div id="adress-container">
                  <div class="field">
                      <%= f.text_field :numero_rue, placeholder: "Numero rue" %>
                  </div>

                  <div class="field">
                      <%= f.text_field :rue, placeholder: "Rue" %>
                  </div>

                  <div class="field">
                      <%= f.text_field :complement_adresse, placeholder: "Complement d'adresse (Facultatif)" %>
                  </div>

                  <div class="field">
                      <%= f.text_field :code_postal, placeholder: "Code postal" %>
                  </div>

                  <div class="field">
                      <%= f.text_field :quartier, placeholder: "Quartier (Facultatif)" %>
                  </div>
                </div>
            </div>
            <% else %>
            <!-- STUDENT CASE -->
            <div class="">
                <div class="field">
                    <%= f.label :Où_habitez_vous?, :class => "full-width" %>
                    <%= f.select :ville, ['Bordeaux', 'Paris','Quimper']%>
                </div>
                <div class="field">
                    <%= f.label :mettez_un_beau_selfie %>
                    <%= f.file_field :image %>
                </div>
                <div class="field">
                    <%= f.text_field :nom, :placeholder => "Nom" %>
                </div>

                <div class="field">
                    <%= f.text_field :prenom, :placeholder => "Prénom" %>
                </div>

                <div class="field">
                    <%= f.email_field :email, autofocus: true, :placeholder => "E-mail" %>
                </div>

                <div class="field">
                    <%= f.text_field :telephone, :placeholder => "Téléphone" %>
                </div>

                <div class="field">
                    <%= f.password_field :password, autocomplete: "off", :placeholder => "Mot de passe" %>
                </div>

                <div class="field">
                    <%= f.password_field :password_confirmation, autocomplete: "off", :placeholder => "Confirmez le mot de passe" %>
                </div>

                <% end %>

                <%= render "devise/shared/links" %>

                <div class="actions">
                    <%= f.submit "Valider", :class => "submit-connect" %>
                </div>
                <% end %>
            </div>
        </div>
    </div>
</section>

<script>
  var userTrue = document.querySelector("#user_role_true");
  var userFalse = document.querySelector("#user_role_false");
  var adr = document.querySelector('#adress-container');

  userTrue.addEventListener("change",function(){
    if(userTrue.checked){
      adr.style.display = "none";
    }
  });
  userFalse.addEventListener("change",function(){
    if(userFalse.checked){
      adr.style.display = "block";
    }
  });

</script>
